---
import { commentConfig } from "@/config";

if (!commentConfig || !commentConfig.giscus) {
  throw new Error("Giscus comments are not configured");
}

const giscus = commentConfig.giscus;
---

<giscus-widget
  repo={giscus.repo}
  repo-id={giscus.repoId}
  category={giscus.category || ""}
  category-id={giscus.categoryId || ""}
  mapping={giscus.mapping || "pathname"}
  term={giscus.term || ""}
  strict={giscus.strict}
  reactions-enabled={giscus.reactionsEnabled}
  emit-metadata={giscus.emitMetadata}
  input-position={giscus.inputPosition}
  theme={giscus.theme}
  lang={giscus.lang}
  loading={giscus.loading}
></giscus-widget>

<script
  is:inline
  src="https://giscus.app/client.js"
  data-repo={giscus.repo}
  data-repo-id={giscus.repoId}
  data-category={giscus.category || ""}
  data-category-id={giscus.categoryId || ""}
  data-mapping={giscus.mapping || "pathname"}
  data-term={giscus.term || ""}
  data-strict={giscus.strict}
  data-reactions-enabled={giscus.reactionsEnabled}
  data-emit-metadata={giscus.emitMetadata}
  data-input-position={giscus.inputPosition}
  data-theme={giscus.theme}
  data-lang={giscus.lang}
  data-loading={giscus.loading}
  crossorigin="anonymous"
  async
></script>
